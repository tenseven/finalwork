<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>学生登录</title>
        <script type="text/javascript" src="signup.js"></script>
        <script type="text/javascript" src="donghua.js"></script>
        <style>
            .list{text-align:center;float:left;list-style:none;font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;}
            .div1{background-color: rgb(80, 82, 82);font-size:26px;padding-top:1%;padding-bottom:3%;}
            .buttonsty{height:8%;width:40%;font-size:30%;border-radius:5px;color:white;background-color:rgb(63, 203, 207);}
            .big_div{display: inline;}
            .mid_div1{float:left;margin-left:32%;margin-top:6%;}
            .mid_div2{float:left;margin-left:6%;margin-top:6%;}
            .display_1{display:block;}
            .display_2{display:none;}
            
        </style>
    </head>
    <body>
        <div class="div1">
            <li class="list">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
            <li class="list"><a style="text-decoration:none;color:white;" href>注册</a></li>
            <li class="list">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
            <li class="list"><a style="text-decoration:none;color:white;" href>管理员登录</a>
            <li class="list">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
            <li class="list"><a style="text-decoration:none;color:white;" href>学生登录</a></li>
            <li class="list">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
            <li class="list"><a style="text-decoration:none;color:white;" href>新书上架</a></li>
            <li class="list">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
            <li class="list"><a style="text-decoration:none;color:white;" href>我要借书</a></li>
            <li class="list">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
            <li class="list"><a style="text-decoration:none;color:white;" href>我要还书</a></li>
            </div>

            <div class="big_div">
                <div class="mid_div1">
                <div style="font-size:170%;border-style:dotted;" onmouseover="display_login();">登录</div>
                <div id="change_login" class="display_l">
                <div>&nbsp&nbsp</div>
                <div style="font-size:130%;">账号   <input id="number" placeholder="学号"></div>
                <div>&nbsp&nbsp</div>
                <div>&nbsp&nbsp</div>
                <div>&nbsp&nbsp</div>
                <div style="font-size:130%;">密码  <input id="pwd" type=password></div>               
                <div>&nbsp&nbsp</div>
                <button id="input" class="buttonsty" onclick="check()">登录</button>
                </div>
                </div>
                <div class="mid_div2">
                <div style="font-size:170%;" onmouseover="display_signup()";>注册</div>
                <div id="change_signup" class="display_2">
                <div>&nbsp&nbsp</div>
                <div style="font-size:130%;">账&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp号<input id="init_number"></div>
                <div>&nbsp&nbsp</div>
                <div style="font-size:130%;">输入密码 <input id="init_pwd"></div>
                <div>&nbsp&nbsp</div>
                <div style="font-size:130%;">确认密码 <input id="second_pwd"></div>
                <div>&nbsp&nbsp</div>
                <button id="input" class="buttonsty" onclick="signup()">注册</button>
                </div>
                </div>
                <h3 id="response_msg"></h3>


            </div>
        
    </body>
</html>
<li class="list2"><img src="photo/virus_30.jpg"  id="sel_pho" onclick=dis_hid() />
    <img src="photo/yellowstar25px.png" 
     id="confirm" onclick=dis_hid2() /><form action="upebook.php" method="post"
      enctype="multipart/form-data" ><input class="style_file_content" name="ebook"
       accept="application/pdf" type="file" id="select_photo" /><input type="submit"
        id="submit_ebook" class="submit_ebook"></form></li>
        <script>
            function search(){
    var xhr=new XMLHttpRequest();
    xhr.open("POST","search.php",true);
    xhr.setRequestHeader('Content-type', "application/json");
    var search_content=document.getElementById('search_content').value;
    var datas={
        "search_content":search_content
    };
    var json_datas=JSON.stringify(datas);
    xhr.onreadystatechange = function(){
        if(xhr.readyState==XMLHttpRequest.DONE && xhr.status==200){
            var myresponse=JSON.parse(this.responseText);
            var nums=myresponse.nums;
            var bookinfo=myresponse.errmsg;
            var getboxid=document.getElementById("book_block");
            getboxid.innerHTML="";
            var write_nums=document.createElement("div");
            write_nums.innerHTML="一共有"+nums+"条结果";
            getboxid.append(write_nums);
            getboxid.style="margin-left:30%;margin-top:5%;"
            var createmaintab1=document.createElement("div");
            //createmaintab1.id="maintab1";
            //createmaintab1.style="margin-left:25%;";
            
            var createmaintab2=document.createElement("div");
            //createmaintab2.id="maintab2";
            //createmaintab2.style="margin-left:40%;";
            
            for(i=0;i<nums;i++){
                var createtab=document.createElement("ul");
                createtab.style="list-style:none; padding:0px; margin:0px; width:70%;height:55%; line-height:260%;font-size:120%;"
                createtab.innerHTML='<li class=listminitab2><a style="text-decoration:none;color:black;" href="/matirials/book.html?id='+bookinfo[i].id+'">书名：'+bookinfo[i].name+'</a></li><li class=listminitab2>作者：'+bookinfo[i].author+'</li>';
                getboxid.append(createtab);
                //getboxid.append(createmaintab1);
            }
            
        }
    }
    xhr.send(json_datas);
}</script>
<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>新书上架</title>
    <script type="text/javascript" src="upwenjian.js"></script>
    <script type="text/javascript" src="donghua.js"></script>
    <script type="text/javascript" src="modify_bi.js"></script>
    <script type="text/javascript" src="get_modifybi.js"></script>
    <style>
        .list{text-align:center;float:left;list-style:none;font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;}
        .div1{background-color: rgb(80, 82, 82);font-size:26px;padding-top:1%;padding-bottom:3%;}
        .mid_div{margin-left:30%;padding-left:10%;margin-top:5%;border-style: solid;margin-right:30%;}
        .style_file_content2{width:12%;}
        .style_file_content{width:5.8%;display: none;}
        .submit_ebook{display: none;}
        .list2{text-decoration:none;list-style: none;font-size: 22px;margin-bottom:4%;}
        .list_respon{text-decoration:none;list-style: none;font-size: 30px;margin-bottom:4%;color:red;}
        .list3{text-decoration:none;list-style: none;font-size: 22px;margin-bottom:1%;}
        .buttonstyle{margin-left:70%;background-color:rgb(47, 173, 142);border-radius: 8px;font-size:22px;color:white;}
    </style>
</head>
<body>
        <div class="div1">
                <li class="list">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                <li class="list"><a style="text-decoration:none;color:white;" href="shouye.html">首页</a></li>
                <li class="list">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                <li class="list"><a style="text-decoration:none;color:white;" href="admin_login.html">管理员登录</a>
                <li class="list">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                <li class="list"><a style="text-decoration:none;color:white;" href="signup_login.html">学生登录</a></li>
                <li class="list">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                <li class="list"><a style="text-decoration:none;color:white;" href="upwenjian.html">新书上架</a></li>
                <li class="list">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                <li class="list"><a style="text-decoration:none;color:white;" href></a></li>
                <li class="list">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                <li class="list"><a style="text-decoration:none;color:white;" href></a></li>
         </div>
         <div class="max">
             <div id="mid_div" class="mid_div">
                 <li class="list3">1、上传封面</li>
                 <li class="list2">
                 <div id="fengmian" style="display:inline;">
                 
                 <li class="list3">&nbsp;<input type="checkbox" />默认封面(统一选默认封面)</li>
                 <li class="list2"></li>
                 <li class="list2">
                    <img src="photo/name32.png">书&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;名&nbsp;<input id="bookname" style="font-size:18px;" tabindex="1"  >
                    <img id="pic1" src="photo/bac1.jpg" style="height:30px;width: 30px" />
                </li>
                 <li class="list2">
                     3、作&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;者&nbsp;<input id="author" style="font-size:18px;"   tabindex="2">
                     <img id="pic2" src="photo/bac1.jpg" style="height:30px;width: 30px;" />
                    </li>
                 <li class="list2">
                        4、出&nbsp;版&nbsp;社&nbsp;&nbsp;<input id="publication" style="font-size:18px;" tabindex="3">
                        <img src="photo/bac1.jpg" style="height:30px;width: 30px"/></li>
                <li class="list2">
                        5、出版年份&nbsp;<input id="comeout_year"style="font-size:18px;" tabindex="4" >&nbsp;&nbsp;<img src="photo/bac1.jpg" style="height:30px;width: 30px;" />
                </li>
                <li class="list2">6、类&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;别&nbsp;<input id="classification" style="font-size:18px;" tabindex="5" >
            
                        <img src="photo/bac1.jpg" style="height:30px;width: 30px;"/>
                </li>
                        <li class="list3">7、简介:</li>
                        <li class="list2"><textarea id="intro" tabindex="6" style="resize: none;font-size:18px;font-family:Verdana, Geneva, Tahoma, sans-serif;" cols=30; rows=7; maxlength="150"; placeholder="不超过150个字"   ></textarea>&nbsp;&nbsp;&nbsp;<img src="photo/virus_40px.jpg" /></li>
                        <li class="list3">8、上传电子书</li>
                        <li class="list2"><button id="select_book_box" style="border-color:white;border-radius: 10px;text-align: center;background-color: rgb(47, 173, 142);color:white;font-size: 25px;" onmouseover="upbookbox()" onmouseout="disupbookbox()" onclick=dis_hid()>上传文件</button><form action="upebook.php" method="post"
                              enctype="multipart/form-data" ><input class="style_file_content" name="ebook"
                               accept="application/pdf" type="file" id="select_ebook" /><input type="submit"
                                id="submit_ebook" class="submit_ebook"></form></li>
                        <li class="list2"><button class="buttonstyle" onclick="upbookinfo();dis_hid2()">提交信息</button></li>
                        <li class="list_respon" id="responsebox"></li>

                 </div>
                 </li>
            </div>

         </div>
</body>
var show_book=new XMLHttpRequest();
show_book.open("POST","show_book.php",true);
show_book.setRequestHeader('content-type','application/json');
var send_null=JSON.stringify();
show_book.onreadystatechange=function (){
    if(show_book.readyState==XMLHttpRequest.DONE && show_book.status==200){
        var get_reply=JSON.parse(this.responseText);
        var book_amount=get_reply.number;
        var book_block=document.getElementById("book_block");

        for(times=0;times<book_amount;times++){
            var create_book_pic=document.createElement('div');
            create_book_pic.className='bookunit';
            console.log(get_reply.errmsg[times].id);
            create_book_pic.innerHTML='<ul class="list"><li class="list2"><a style="text-decoration:none;" href="/matirials/book.html?id='+get_reply.errmsg[times].id+'"><img src='+get_reply.errmsg[times].picture+' height="210px" width="200px" alt="暂无封面"></a></li>'+
            '<li class="list2"><a style="text-decoration:none;color:black;" href="/matirials/book.html?id='+get_reply.errmsg[times].id+'">'+get_reply.errmsg[times].name+'</a></li><li class="list2">&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="list2">&nbsp;&nbsp;&nbsp;&nbsp;</li></ul><ul class="list"><li class="list2">&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="list2">&nbsp;&nbsp;&nbsp;&nbsp</li></ul>'
            book_block.append(create_book_pic);
        }
        
        
    }
}
show_book.send(send_null);